# ====================================
# Server Configuration
# ====================================
# Server Settings
server.port=8080
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json,application/xml
server.compression.min-response-size=2KB
server.tomcat.max-http-header-size=16KB
server.tomcat.max-threads=200
server.tomcat.min-spare-threads=10

# Application Settings
spring.application.name=ChatHTKH
server.servlet.context-path=/api
spring.mvc.throw-exception-if-no-handler-found=true
spring.mvc.static-path-pattern=/static/**

# Async Configuration
spring.task.execution.pool.core-size=10
spring.task.execution.pool.max-size=20
spring.task.execution.pool.queue-capacity=500
spring.task.execution.thread-name-prefix=async-task-


# ====================================
# Database Configuration
# ====================================
# SQL Server Configuration
spring.datasource.url=jdbc:sqlserver://localhost:1433;databaseName=ChatHTKHDb;encrypt=true;trustServerCertificate=true;
spring.datasource.username=sa
spring.datasource.password=Hugodien3504@
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

# Hibernate/JPA Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SQLServer2012Dialect
# Hibernate/JPA Advanced
spring.jpa.properties.hibernate.jdbc.time_zone=Asia/Ho_Chi_Minh
spring.jpa.properties.hibernate.cache.use_second_level_cache=true
# spring.jpa.properties.hibernate.cache.region.factory_class=org.hibernate.cache.ehcache.EhCacheRegionFactory
spring.cache.type=none

spring.jpa.properties.hibernate.cache.use_query_cache=true
spring.jpa.properties.hibernate.generate_statistics=false
spring.jpa.properties.hibernate.jdbc.batch_size=25
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true


# ====================================
# JWT & Security Configuration
# ====================================
# JWT Settings
jwt.secret=your-256-bit-secret-key-change-this-in-production
jwt.expiration=86400000 # 24 hours in milliseconds
jwt.refresh-expiration=604800000 # 7 days in milliseconds
jwt.issuer=ChatHTKH-API
jwt.audience=chat-application

# Security Settings
spring.security.user.name=admin
spring.security.user.password=admin123
spring.security.user.roles=ADMIN

# Password Encoder
spring.security.password.encoder.strength=10

# ====================================
# CORS & Security Headers Configuration
# ====================================
# CORS Configuration
app.cors.allowed-origins=http://localhost:3000,http://localhost:4200
app.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
app.cors.allowed-headers=*
app.cors.allow-credentials=true
app.cors.max-age=3600

# Security Headers
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.same-site=lax

# Content Security Policy
# spring.security.headers.content-security-policy=\
#   default-src 'self'; \
#   script-src 'self' 'unsafe-inline' 'unsafe-eval' cdn.jsdelivr.net; \
#   style-src 'self' 'unsafe-inline' cdn.jsdelivr.net; \
#   img-src 'self' data:; \
#   font-src 'self' cdn.jsdelivr.net;

# ====================================
# Swagger/OpenAPI Configuration
# ====================================
# API Documentation
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.tryItOutEnabled=true
springdoc.swagger-ui.filter=true
springdoc.swagger-ui.syntaxHighlight.activate=true
springdoc.swagger-ui.syntaxHighlight.theme=monokai
springdoc.swagger-ui.display-request-duration=true
springdoc.swagger-ui.validatorUrl=
springdoc.api-docs.version=openapi_3_0
springdoc.paths-to-match=/api/**

# ====================================
# Logging Configuration
# ====================================
# Root logging
logging.level.root=INFO

# Spring Framework Logging
logging.level.org.springframework=INFO
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security=INFO
logging.level.org.springframework.jdbc=INFO

# Hibernate Logging
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.org.hibernate.stat=DEBUG
logging.level.org.hibernate.hql.internal.ast=WARN

# Application Logging
logging.level.com.academyproject=DEBUG
logging.level.com.academyproject.security=TRACE
logging.level.com.academyproject.websocket=DEBUG

# Log File Configuration
logging.file.name=logs/application.log
logging.file.max-size=10MB
logging.file.max-history=30
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ====================================
# File Storage Configuration
# ====================================
# File Upload Settings
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
spring.servlet.multipart.file-size-threshold=2MB

# File Storage Directories
app.file.upload-dir=./uploads
app.file.max-directory-levels=3
app.file.allowed-extensions=jpg,jpeg,png,gif,pdf,doc,docx,xls,xlsx
app.file.max-filename-length=100

# ====================================
# WebSocket Configuration
# ====================================
# WebSocket Endpoints
app.websocket.endpoint=/ws
app.websocket.topic.messages=/topic/messages
app.websocket.application.destination.prefix=/app
app.websocket.broker.topic.prefix=/topic
app.websocket.user.destination-prefix=/user
app.websocket.allowed-origins=${app.cors.allowed-origins}

# WebSocket Message Broker
spring.websocket.stomp.broker.relay.host=localhost
spring.websocket.stomp.broker.relay.port=61613
spring.websocket.stomp.broker.relay.system-login=guest
spring.websocket.stomp.broker.relay.system-passcode=guest
spring.websocket.stomp.broker.relay.client-login=guest
spring.websocket.stomp.broker.relay.client-passcode=guest

# WebSocket Thread Pool
spring.websocket.client.tomcat.worker-pool.core-pool-size=10
spring.websocket.client.tomcat.worker-pool.max-pool-size=20
spring.websocket.client.tomcat.worker-pool.keep-alive-seconds=60



spring.jpa.properties.hibernate.cache.use_second_level_cache=false
spring.jpa.properties.hibernate.cache.use_query_cache=false
spring.jpa.properties.hibernate.cache.region.factory_class=org.hibernate.cache.internal.NoCachingRegionFactory
